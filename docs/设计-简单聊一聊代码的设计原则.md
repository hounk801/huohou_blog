 上一篇《[代码规范](https://www.hounk.world/archives/ni-de-dai-ma-zhu-yi-gui-fan-ma)》的文章中主要提到的是一些代码格式，一些零碎技巧，编写方式等等。做好了这些毕竟只是基础，在规范一步步成型的过程中，和他人开始沟通一些具体的接口、对象的设计，通过交流去体会一些设计原则的重要性必要性。一个几百行的函数是真的很吓人，万一出现问题后期也不好维护，不利于分析问题。来看看这个吓人的函数，函数名还是开发者自己的名字给个马赛克吧
![image476c4ea.png](https://www.hounk.world/upload/2021/01/image-476c4ea-8953111b8c274d7e916e0e96667993fd.png)
那么我们怎么去设计一个函数呢？为什么有些代码需要拆分成一个独立的函数有些却不需要呢？或者说如何设计一个对象甚至一个服务呢？在重构之前的代码的时候，怎么拆分呢，拆分的边界在哪里？


如果要设计好一个系统那就不得不提设计模式的六大设计原则。
## 设计模式的原则

在设计模式中有六种设计原则，可以使程序解决紧耦合，更加健壮，它们分别是单一原则、开闭原则、里氏替换原则、接口隔离原则、依赖倒置原则。
### 单一职责原则（Single Responsiblity Principle）
单一原则的核心思想就是：系统中每一个对象都应该只有一个单独的职责，而所有对象所关注的就是自身职责的完成。其实就是开发人员经常说的”高内聚，低耦合”，每个类应该只有一个职责，对外只能提供一种功能，而引起类变化的原因应该只有一个。设计模式中所有的模式都遵循这一原则。
需要注意的是当实际情况中的职责确实发生了变化应用该原则才是有意义的。如果一个类组合了多个职责，但这些职责在实际情况中根本不会发生变化，那就完全没有必要提前费劲心机去应用这个原则。有时候开发人员设计接口的时候会有些问题，比如用户的属性和用户的行为被放在一个接口中声明，这就造成了业务对象和业务逻辑被放在了一起，使得接口有两种职责，造成职责不明确，就违背了单一原则。

### 开闭原则（Open Closed Principle）
开闭原则的核心思想是对扩展开放，对修改关闭。也就是说，对已经使用的类的改动是通过增加代码进行的，而不是修改现有代码，实现一个热插拔的效果。根据开闭原则，改变一个对象时，应该通过扩展的方式来实现软件的改变，而不应靠修改原有代码来实现变化。

### 里式替换原则（Liskov Substitution Principle）
所有基类出现的地方都可以用派生类替换而不会程序产生错误。所有引用基类的地方必须能够透明地使用其子类对象，也就是说只要父类出现的地方，子类就能够出现，而且替换为子类不会产生任何错误或异常。但是反过来子类出现的地方替换为父类就可能出现问题。

这个原则为良好的继承定义了一个规范，简单地讲有4层含义
* 子类必须完全实现父类的方法
* 子类可以有自己的特性

* 覆盖或者实现父类的方法时输入参数可以被方大

* 覆写或者实现父类的方法时输出结果可以被缩小

里式替换的原则认为子类可以扩展父类的功能，但不能改变父类原有的功能，也就是说：子类继承父类时，除添加新的方法完成新增功能外，尽量不要重写父类的方法。
### 接口分离原则（Interface Segregation Principle）
要求程序员尽量将臃肿庞大的接口拆分成更小的和更具体的接口，让接口中只包含客户感兴趣的方法。接口隔离原则和单一职责都是为了提高类的内聚性、降低它们之间的耦合性，体现了封装的思想，但两者是不同的：
* 单一职责原则注重的是职责，而接口隔离原则注重的是对接口依赖的隔离。

* 单一职责原则主要是约束类，它针对的是程序中的实现和细节；接口隔离原则主要约束接口，主要针对抽象和程序整体框架的构建。

### 依赖注入原则（Dependency Inversion Principle）
依赖倒转原则的核心思想是：要依赖于抽象和接口，不要依赖于具体的实现。其实就是说：在应用程序中，所有的类如果使用或依赖于其他的类，则应该依赖这些其他类的抽象类或者接口，而不是直接依赖这些其他类的具体类。为了实现这一原则，就要求我们在编程的时候针对抽象类或者接口编程，而不是针对具体实现编程。

依赖倒转原则有如下三点说明：
* 高层模块不应依赖低层模块，两者都应该依赖于抽象；

* 抽象不应该依赖于具体细节；

* 细节应该依赖抽象

比如类A内有类B对象，称为类A依赖类B，但是不应该这样做，而是选择类A去依赖抽象。例如垃圾收集器不管垃圾是什么类型，要是垃圾就行。

### 迪米特原则（Principle of Least Knowledge）
迪米特法则又叫最少认知原则，它的核心思想是一个对象应当对其他对象尽可能少的了解。其实就是说：降低各个对象之间的耦合，提高系统的可维护性。在模块之间应该只通过接口编程，而不理会模块的内部工作原理，它可以使各个模块耦合度降到最低，促进软件的复用。拿我们身边的朋友圈举例子，朋友圈的确定，如果两个人有一个共同的好友，那么他们的朋友圈点赞和留言也是可见的，如果没有共同好友，那么彼此不可见。

## 感受

设计原则不是一天就可以养成的，多膜拜大神的代码，多看看优秀源码有助于自己提高。在此向之前学习过的各位大佬表示感谢



参考：
![image.png](http://140.143.145.178:8090/upload/2020/12/image-ef2dbfaab7194d529a6247ac138f6ba7.png)
