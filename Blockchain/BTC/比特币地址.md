# 创建账户
比特币创建全部是匿名账户，在比特币中其实所谓的账户就是用非对称加密算法(比特币使用的椭圆曲线算法)创建的一对秘钥，分为公钥和私钥。 首先私钥是一个随机数，随机选取一个32字节的数，然后再使用椭圆曲线加密算法（ECDSA-secp256k1）对这个私钥压缩生成公钥。 也就是说比特币的账户本质上就是一个随机数而已，它是你拥有比特币的唯一凭证。通常发送给别人的钱包地址就是公钥通过一系列的 hash 计算和Base58编码得到的。但是钱包地址不等于公钥, 因为以上过程全部是不可逆的， 也就是说你不能通过钱包地址推算出公钥，也不能通过公钥反推算出私钥。其实从私钥到地址，中间经过了9个步骤的计算处理，所以私钥是绝对安全的，不可能 被破解。

账户生产过程总结如下：

- 生成一个 32 字节的随机数作为私钥
- 把私钥使用椭圆曲线算法加密，生成公钥
- 把公钥进行一系列的 hash 计算生成公钥摘要
- 使用 Base58 编码技术对公钥摘要进行编码得到地址(这一步是可逆的)
# 私钥
      私钥就是一个256位的随机数。这个随机数的产生是钱包功能之一。也就是说，钱包内置了密码级别的随机数产生器，保证产生的随机数是没有规律可循的，也就是说不易破解的。钱包是在用户终端运行的，产生的私钥就保存在用户终端，不会也不应该上传给钱包公司。尽量使用开源的，被公开考验过的钱包软件，保证安全。
       这里注意，根私钥不一定要是256位的。可以是128位，或196位或其他位数，只要强度足够大（一般要求至少128位）就行，而由其计算出来的派生私钥则一定是256位的。
# 比特币地址
       比特币地址可由公钥经过单向的加密哈希算法得到。哈希算法是一种单向函数，接收任意长度的输入产生指纹或哈希。由公钥生成比特币地址时使用的算法是 Secure Hash Algorithm (SHA)和 the RACE Integ rity Primitives Evaluation Message Digest (RIPEMD)，具体地说是 SHA256 和 RIPEMD160。以公钥 K 为输入，计算其SHA256 哈希值，并以此结果计算 RIPEMD160 哈希值，得到一个长度为 160 位（20 字节）的数字：
A = RIPEMD160(SHA256(K))
公式中，K 是公钥，A 是生成的比特币地址。
> 比特币地址与公钥不同。比特币地址是由公钥经过单向的哈希函数生成的。

# 三种格式
1. Legacy (P2PKH)格式
范例：1Fh7ajXabJBpZPZw8bjD3QU4CuQ3pRty9u
地址以“1”开头，是比特币最初的地址格式，至今仍在使用。P2PKH 是 Pay To PubKey Hash（付款至公钥哈希）的缩写。
**2. Nested SegWit (P2SH)格式**
范例：3KF9nXowQ4asSGxRRzeiTpDjMuwM2nypAN
地址以"3"开头，P2SH 是Pay To Script Hash（支付至脚本哈希）的缩写，它支持比Legacy 地址更复杂的功能。Nested P2SH，获取现有的P2SH地址(以“3”开头)，并与SegWit地址一起封装。以此来兼容老版本。但这是某种破解行为，导致SegWit交易需要大约10%的额外空间。这与扩容的目的相矛盾。

3. Native SegWit (Bech32)格式
范例：bc1qf3uwcxaz779nxedw0wry89v9cjh9w2xylnmqc3
地址以”bc1“开头。Bech32编码的地址，是专为SegWit开发的地址格式。Bech32在2017年底在BIP173被定义，该格式的主要特点之一是它不区分大小写（地址中只包含0-9，az），因此在输入时可有效避免混淆且更加易读。由于地址中需要的字符更少，地址使用Base32编码而不是传统的Base58，计算更方便、高效。数据可以更紧密地存储在二维码中。Bech32提供更高的安全性，更好地优化校验和错误检测代码，将出现无效地址的机会降到最低。
Bech32地址本身与SegWit兼容。不需要额外的空间来将SegWit地址放入P2SH地址，因此使用Bech32格式地址，手续费会更低。
Bech32地址比旧的Base58（Base58Check编码用于将比特币中的字节数组编码为人类可编码的字符串）地址有几个优点：
QR码更小；
更好地防错；
更加安全；
不区分大小写；
只由小写字母组成，所以在阅读、输入和理解时更容易。
![image.png](https://cdn.nlark.com/yuque/0/2022/png/1676674/1671592796638-f96b84a2-7888-47db-89c8-e3bc839f2a1b.png#averageHue=%23d2d2d2&clientId=u591d4e0d-4a77-4&from=paste&height=106&id=u6adb11c8&originHeight=212&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&size=111344&status=done&style=none&taskId=uc062f590-d033-43af-8629-927ef6c5448&title=&width=540)

[https://zhuanlan.zhihu.com/p/80734005](https://zhuanlan.zhihu.com/p/80734005)

